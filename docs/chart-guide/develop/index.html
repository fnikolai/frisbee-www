<!DOCTYPE html>
<html class="no-js" lang="en-us">

<head>
  <meta charset="utf-8">
  
  <link rel="preload" href="https://fnikolai.github.io/frisbee-www/fonts/muli-latin-200.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="https://fnikolai.github.io/frisbee-www/fonts/muli-latin-400.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="https://fnikolai.github.io/frisbee-www/fonts/muli-latin-800.woff2" as="font" type="font/woff2" crossorigin>

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Develop a new Chart For Frisbee | </title>

  <meta name="viewport" content="width=device-width,minimum-scale=1">
  <meta name="generator" content="Hugo 0.101.0" />

  
  <meta name="robots" content="noindex, nofollow">
  

  
  
  
  
  
  
  
  <link rel="stylesheet" href="https://fnikolai.github.io/frisbee-www/output/css/app.min.b368142944d203fdc1d3dec8ab085c0c0e75aaf9171853110f03e91c1c2616f4.css" integrity="sha256-s2gUKUTSA/3B097IqwhcDA51qvkXGFMRDwPpHBwmFvQ=" crossorigin="anonymous">
  
  
  

  <meta name="description"
  content="Guide for the Frisbee Chart Developers">

  






  
  <script type="text/javascript" src="https://fnikolai.github.io/frisbee-www/output/js/app.d45556fb33ae1b6a80d0ca8947dc6206bb04aa896ff68df8dff63ece1ae625a6.js" integrity="sha256-1FVW&#43;zOuG2qA0MqJR9xiBrsEqolv9o343/Y&#43;zhrmJaY=" crossorigin="anonymous" defer></script>
  
      
 


<script async defer src="https://buttons.github.io/buttons.js"></script>

  
<link rel="apple-touch-icon" sizes="180x180" href="https://fnikolai.github.io/frisbee-www/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://fnikolai.github.io/frisbee-www/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://fnikolai.github.io/frisbee-www/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://fnikolai.github.io/frisbee-www/manifest.json">
<link rel="mask-icon" href="https://fnikolai.github.io/frisbee-www/safari-pinned-tab.svg" color="#0594cb">
<meta name="theme-color" content="#ffffff">
<meta property="og:title" content="Develop a new Chart For Frisbee" />
<meta property="og:description" content="Guide for the Frisbee Chart Developers" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fnikolai.github.io/frisbee-www/docs/chart-guide/develop/" /><meta property="og:image" content="https://fnikolai.github.io/frisbee-www/opengraph/card-base_huf001e7df4fd9c00c4355abac7d4ca455_242906_filter_13213782874548603496.png"/><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2022-06-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-06-28T00:00:00+00:00" /><meta property="og:site_name" content="Helm" />
<meta itemprop="name" content="Develop a new Chart For Frisbee">
<meta itemprop="description" content="Guide for the Frisbee Chart Developers"><meta itemprop="datePublished" content="2022-06-28T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-06-28T00:00:00+00:00" />
<meta itemprop="wordCount" content="3009">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://fnikolai.github.io/frisbee-www/opengraph/card-base_huf001e7df4fd9c00c4355abac7d4ca455_242906_filter_13213782874548603496.png"/>
<meta name="twitter:title" content="Develop a new Chart For Frisbee"/>
<meta name="twitter:description" content="Guide for the Frisbee Chart Developers"/>


</head>

<body class="ma0 sans-serif bg-primary-color-light">
  

  
<nav class="bg-primary-color-dark pv4 w-100" role="navigation">

  <div class="center flex-ns flex-wrap items-center justify-start mw9">

    <h1 class="dim f3 lh-solid ml0-ns mr0 mr4-l mv0 pl3 pl4-ns">
      <a href="https://fnikolai.github.io/frisbee-www" class="link white">
         Home
      </a>
    </h1>
    <ul class="list ma0 pa0 dn dib-l" role="menu">
      
        <li class="f5 dib mr4" role="menuitem">
            
          <a href="https://fnikolai.github.io/frisbee-www/news/" class="dim link light-silver">
            News
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4" role="menuitem">
            
          <a href="https://fnikolai.github.io/frisbee-www/docs/" class="dim link light-silver">
            Docs
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4" role="menuitem">
            
          <a href="https://fnikolai.github.io/frisbee-www/showcase/" class="dim link light-silver">
            Showcase
              
            
            
          </a>
        </li>
      
        <li class="f5 dib mr4" role="menuitem">
            
          <a href="https://github.com/CARV-ICS-FORTH/frisbee/discussions" class="dim link light-silver">
            Community
              
            
            
              <span class="pl1">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link">
<path d="M25.152 16.576v5.696q0 2.144-1.504 3.648t-3.648 1.504h-14.848q-2.144 0-3.648-1.504t-1.504-3.648v-14.848q0-2.112 1.504-3.616t3.648-1.536h12.576q0.224 0 0.384 0.16t0.16 0.416v1.152q0 0.256-0.16 0.416t-0.384 0.16h-12.576q-1.184 0-2.016 0.832t-0.864 2.016v14.848q0 1.184 0.864 2.016t2.016 0.864h14.848q1.184 0 2.016-0.864t0.832-2.016v-5.696q0-0.256 0.16-0.416t0.416-0.16h1.152q0.256 0 0.416 0.16t0.16 0.416zM32 1.152v9.12q0 0.48-0.352 0.8t-0.8 0.352-0.8-0.352l-3.136-3.136-11.648 11.648q-0.16 0.192-0.416 0.192t-0.384-0.192l-2.048-2.048q-0.192-0.16-0.192-0.384t0.192-0.416l11.648-11.648-3.136-3.136q-0.352-0.352-0.352-0.8t0.352-0.8 0.8-0.352h9.12q0.48 0 0.8 0.352t0.352 0.8z"></path>
</svg>

              </span>
            
          </a>
        </li>
      
        <li class="f5 dib mr4" role="menuitem">
            
          <a href="https://github.com/CARV-ICS-FORTH/frisbee" class="dim link light-silver">
            GitHub
              
            
            
              <span class="pl1">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link">
<path d="M25.152 16.576v5.696q0 2.144-1.504 3.648t-3.648 1.504h-14.848q-2.144 0-3.648-1.504t-1.504-3.648v-14.848q0-2.112 1.504-3.616t3.648-1.536h12.576q0.224 0 0.384 0.16t0.16 0.416v1.152q0 0.256-0.16 0.416t-0.384 0.16h-12.576q-1.184 0-2.016 0.832t-0.864 2.016v14.848q0 1.184 0.864 2.016t2.016 0.864h14.848q1.184 0 2.016-0.864t0.832-2.016v-5.696q0-0.256 0.16-0.416t0.416-0.16h1.152q0.256 0 0.416 0.16t0.16 0.416zM32 1.152v9.12q0 0.48-0.352 0.8t-0.8 0.352-0.8-0.352l-3.136-3.136-11.648 11.648q-0.16 0.192-0.416 0.192t-0.384-0.192l-2.048-2.048q-0.192-0.16-0.192-0.384t0.192-0.416l11.648-11.648-3.136-3.136q-0.352-0.352-0.352-0.8t0.352-0.8 0.8-0.352h9.12q0.48 0 0.8 0.352t0.352 0.8z"></path>
</svg>

              </span>
            
          </a>
        </li>
      
    </ul>

    <div class="db dib-ns pl3"><form id="site-search-form" action="" role="search">
  <fieldset class="bn ma0 pa0">
    <label class="clip" for="search-input">Search</label>
    <input type="search" id="search-input" class="needs-js bg-left bn f5 input-reset lh-solid mt3 mt0-ns pl4 pv2 w5 white" placeholder="Search the Docs" name="search-input" value="" style="background: url('/images/icon-search.png') 5px 11px/16px 16px no-repeat; background-color: rgba(255,255,255,0);">
  </fieldset>
</form>
</div>

    <span class="absolute mt1 mt2-l pr3 right-0 top-0">

<a class="github-button needs-js link primary-color-dark" href="https://github.com/CARV-ICS-FORTH/frisbee/stargazers" data-size="large" data-show-count="true" aria-label="Star Frisbee on GitHub">Star</a>
</span>

  </div>
</nav>

  
  <main role="main" class="content-with-sidebar min-vh-100 pb7 pb0-ns">
    
  <article class="w-100 ph4 pb5 pb6-ns pt1 pt5-ns">
    <div class="flex-l">

      <div class="order-2 w-100 w-20-l ph5-m ph0-l mb4 sticky">
<aside class="fixed-lTK mw5-l right-0 f6 bl-l b--moon-gray pv4 pv0-ns ph4-l nested-list-reset nested-links nested-copy-line-height">
	
		<p class="b">What's on this Page</p>
  	<nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-a-helm-chart-">What is a Helm Chart ?</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#run-a-test">Run a Test</a>
      <ul>
        <li><a href="#debugging-an-installation">Debugging an Installation</a></li>
      </ul>
    </li>
    <li><a href="#debug-a-test">Debug a Test</a></li>
    <li><a href="#write-a-test">Write a test</a></li>
  </ul>

  <ul>
    <li><a href="#run-a-test-1">Run a test</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#kubernetes-dashboard">Kubernetes Dashboard</a></li>
        <li><a href="#grafana-dashboard--alerts">Grafana Dashboard &amp; Alerts</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#baseline">Baseline</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#stress">Stress</a></li>
    <li><a href="#scaleout">Scaleout</a></li>
    <li><a href="#elasticity">Elasticity</a></li>
    <li><a href="#chaos">Chaos</a></li>
    <li><a href="#guide-for-the-frisbee-plan-developers">Guide for the Frisbee Plan Developers</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#do-not-set-dependencies-on-cascades">Do not set dependencies on cascades</a></li>
      </ul>
    </li>
  </ul>
</nav>
	

	<div date-pref>
		
			<a href="https://fnikolai.github.io/frisbee-www/docs/documentation/" class="dib f6 pl1 hover-bg-light-gray br-100" title="Frisbee Documentation ">
				<svg class="fill-current" height="30px" viewBox="0 0 24 24" width="30px" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>

			</a>
		

		
			<a href="https://fnikolai.github.io/frisbee-www/docs/troubleshooting/faq/" class="dib f6 pr1 hover-bg-light-gray br-100" title="Frequently Asked Questions">
			<svg class="fill-current" height="30px" viewBox="0 0 24 24" width="30px" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>

			</a>
		
	</div>

</aside>
</div>

      <div class="order-1 w-60-l mw7 ph0 ph5-ns mid-gray nested-copy-line-height no-underline nested-links nested-img nested-copy-seperator nested-blockquote mt0-ns" style="flex-grow:1;">
        <div class="documentation-copy center measure-wide-l">
          <div id="readout" class="fixed right-0 bottom-0">
          </div>
          <header class="flex-none w-100">
  
  <h1 class="lh-title mb3 mv0 pt3 primary-color-dark">Develop a new Chart For Frisbee</h1>
</header>

<aside class="bt bw1 pt3 mt2 mid-gray b--mid-gray fn w-100">
  
    <div class="f4 fw4 lh-copy">
      Guide for the Frisbee Chart Developers
    </div>
  

  
</aside>



<div class="prose" id="prose">

<p>This is a guide for those who wish to contribute new Charts in Frisbee.</p>
<p>Because there is an overlap, we advise you to have a look at the Guide for Code Developers first.</p>
<h2 id="what-is-a-helm-chart-">What is a Helm Chart ? <a class="header-link" href="#what-is-a-helm-chart-"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>Helm is a package manager for Kubernetes.</p>
<p>Helm uses <strong>a packaging format called charts</strong>. A chart is a collection of files that describe a related set of
Kubernetes resources. A single chart might be used to deploy something simple, like a memcached pod, or something
complex, like a full web app stack with HTTP servers, databases, caches, and so on.</p>
<p>The best way to start is by reading the official <a href="https://helm.sh/docs/">Helm documentation</a>.</p>
<p>Control how to visualize the services.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// DrawAs hints how to mark points on the Grafana dashboard.
</span></span><span style="display:flex;"><span>DrawAs string = &#34;frisbee.io/draw/&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// DrawAsPoint will mark the creation and deletion of a service as distinct events.
</span></span><span style="display:flex;"><span>DrawAsPoint string = &#34;pointInTime&#34;
</span></span><span style="display:flex;"><span>// DrawAsRegion will draw a region starting from the creation of a service and ending to the deletion of the service.
</span></span><span style="display:flex;"><span>DrawAsRegion string = &#34;timeRegion&#34;
</span></span></code></pre></div><h4 id="lint-charts">Lint Charts <a class="header-link" href="#lint-charts"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>yamllint ./platform/Chart.yaml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>docker run quay.io/helmpack/chart-testing:lates ct lint --target-branch=main --check-version-increment=false
</span></span></code></pre></div><h4 id="working-with-microk8s-built-in-registry">Working with MicroK8s’ built-in registry <a class="header-link" href="#working-with-microk8s-built-in-registry"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Install the registry</span>
</span></span><span style="display:flex;"><span>microk8s <span style="color:#366">enable</span> registry
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># To upload images we have to tag them with localhost:32000/your-image before pushing them:</span>
</span></span><span style="display:flex;"><span>docker build . -t localhost:32000/mynginx:registry
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Now that the image is tagged correctly, it can be pushed to the registry:</span>
</span></span><span style="display:flex;"><span>docker push localhost:32000/mynginx
</span></span></code></pre></div><p>Pushing to this insecure registry may fail in some versions of Docker unless the daemon is explicitly configured to
trust this registry.</p>
<p>To address this we need to edit <code>/etc/docker/daemon.json</code> and add:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#309;font-weight:bold">&#34;insecure-registries&#34;</span>: [
</span></span><span style="display:flex;"><span><span style="color:#c30">&#34;localhost:32000&#34;</span>
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The new configuration should be loaded with a Docker daemon restart:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart docker
</span></span></code></pre></div><p>Source: <a href="https://microk8s.io/docs/registry-built-in">https://microk8s.io/docs/registry-built-in</a></p>
<h2 id="run-a-test">Run a Test <a class="header-link" href="#run-a-test"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>The easiest way to begin with is by have a look at the examples. Let's assume you are interested in testing TiKV.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>&gt;&gt; <span style="color:#366">cd</span> examples/tikv/
</span></span><span style="display:flex;"><span>&gt;&gt; ls
</span></span><span style="display:flex;"><span>templates  plan.baseline.yml  plan.elasticity.yml  plan.saturation.yml  plan.scaleout.yml
</span></span></code></pre></div><p>You will some <code>plan.*.yml</code> files, and a sub-directory called <code>templates</code>.</p>
<ul>
<li><strong>Templates:</strong> are libraries of frequently-used specifications that are reusable throughout the testing plan.</li>
<li><strong>Plans:</strong> are lists of actions that define what will happen throughout the test.</li>
</ul>
<p>In general, a plan may dependent on numerous templates, and the templates depend on other templates.</p>
<p>To run the test will all the dependencies satisfied:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Create a dedicated Frisbee name</span>
</span></span><span style="display:flex;"><span>&gt;&gt; kubectl create namespace karvdash-fnikol
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Run the test</span>
</span></span><span style="display:flex;"><span>&gt;&gt; kubectl -n karvdash-fnikol apply -f ../core/observability/ -f ../core/ycsb/ -f ./templates/ -f templates/telemetry/ -f plan.baseline.yml
</span></span></code></pre></div><p>For TikV, the dependencies are:</p>
<ul>
<li>
<p><code>./templates/</code> : TiKV servers and clients</p>
</li>
<li>
<p><code>./templates/telemetry</code> : Telemetry for TiKV servers (TiKV-specific metrics)</p>
</li>
<li>
<p><code>examples/templates/core/observability</code> : Telemetry for TiKV containers (system-wise metrics)</p>
</li>
<li>
<p><code>examples/templates/core/ycsb</code> : Telemetry for TiKV clients (YCSB-specific metrics)</p>
</li>
</ul>
<blockquote>
<p>BEWARE:</p>
<ol>
<li>flag <code>-f</code> does not work recursively. You must explicitly declare the telemetry directory.</li>
<li>If you modify a template, you must re-apply it</li>
</ol>
</blockquote>
<h3 id="debugging-an-installation">Debugging an Installation <a class="header-link" href="#debugging-an-installation"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3>
<p>Error: UPGRADE FAILED: unable to recognize &quot;&quot;: no matches for kind &quot;Template&quot; in version &quot;frisbee.io/v1alpha1&quot;</p>
<p>In the next step, you should validate that CRDs are successfully installed.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Validate the CRDs are properly installed</span>
</span></span><span style="display:flex;"><span>&gt;&gt; kubectl get crds  | grep frisbee.io
</span></span></code></pre></div><p>chaos.frisbee.io 2021-12-17T12:30:06Z clusters.frisbee.io 2021-12-17T12:30:06Z services.frisbee.io 2021-12-17T12:30:07Z
telemetries.frisbee.io 2021-12-17T12:30:07Z workflows.frisbee.io 2021-12-17T12:30:07Z</p>
<h2 id="debug-a-test">Debug a Test <a class="header-link" href="#debug-a-test"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>At this point, the workflow is installed. You can go to the controller's terminal and see some progress.</p>
<p>If anything fails, you will it see it from there.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ sudo curl -s https://raw.githubusercontent.com/ncarlier/webhookd/master/install.sh | bash
</span></span></code></pre></div><h2 id="write-a-test">Write a test <a class="header-link" href="#write-a-test"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>helm install --dry-run --debug --dependency-update ./ ../observability/</p>
<p><a href="https://github.com/helm/chartmuseum">https://github.com/helm/chartmuseum</a></p>
<p><a href="https://medium.com/@maanadev/how-set-up-a-helm-chart-repository-using-apache-web-server-670ffe0e63c7">https://medium.com/@maanadev/how-set-up-a-helm-chart-repository-using-apache-web-server-670ffe0e63c7</a></p>
<p>Deploy as helm chart helm repo index ./ --url <a href="https://carv-ics-forth.github.io/frisbee">https://carv-ics-forth.github.io/frisbee</a></p>
<h1 id="change-the-code">Change the Code</h1>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span>The<span style="color:#bbb"> </span>easiest<span style="color:#bbb"> </span>way<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>begin<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">with</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">is</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">by</span><span style="color:#bbb"> </span>have<span style="color:#bbb"> </span>a<span style="color:#bbb"> </span>look<span style="color:#bbb"> </span>at<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>examples.<span style="color:#bbb"> </span>It<span style="color:#bbb"> </span>consists<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>two<span style="color:#bbb"> </span>sub<span style="color:#555">-</span>directories:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">*</span><span style="color:#bbb"> </span><span style="color:#555">**</span>Templates:<span style="color:#555">**</span><span style="color:#bbb"> </span>are<span style="color:#bbb"> </span>libraries<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>frequently<span style="color:#555">-</span>used<span style="color:#bbb"> </span>specifications<span style="color:#bbb"> </span>that<span style="color:#bbb"> </span>are<span style="color:#bbb"> </span>reusable<span style="color:#bbb"> </span>throughout<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>testing<span style="color:#bbb"> </span>plan.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">*</span><span style="color:#bbb"> </span><span style="color:#555">**</span>Testplans:<span style="color:#555">**</span><span style="color:#bbb"> </span>are<span style="color:#bbb"> </span>lists<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>actions<span style="color:#bbb"> </span>that<span style="color:#bbb"> </span>define<span style="color:#bbb"> </span>what<span style="color:#bbb"> </span>will<span style="color:#bbb"> </span>happen<span style="color:#bbb"> </span>throughout<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>test.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>We<span style="color:#bbb"> </span>will<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">use</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span><span style="color:#555">`</span>examples<span style="color:#555">/</span>testplans<span style="color:#555">/</span><span style="color:#f60">3</span>.failover.yml<span style="color:#555">`</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">as</span><span style="color:#bbb"> </span>a<span style="color:#bbb"> </span>reference.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>This<span style="color:#bbb"> </span>plans<span style="color:#bbb"> </span>uses<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>following<span style="color:#bbb"> </span>templates:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">*</span><span style="color:#bbb"> </span><span style="color:#555">`</span>examples<span style="color:#555">/</span>templates<span style="color:#555">/</span>core<span style="color:#555">/</span>sysmon.yml<span style="color:#555">`</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">*</span><span style="color:#bbb"> </span><span style="color:#555">`</span>examples<span style="color:#555">/</span>templates<span style="color:#555">/</span>redis<span style="color:#555">/</span>redis.cluster.yml<span style="color:#555">`</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">*</span><span style="color:#bbb"> </span><span style="color:#555">`</span>examples<span style="color:#555">/</span>templates<span style="color:#555">/</span>ycsb<span style="color:#555">/</span>redis.client.yml<span style="color:#555">`</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>Because<span style="color:#bbb"> </span>these<span style="color:#bbb"> </span>templates<span style="color:#bbb"> </span>are<span style="color:#bbb"> </span>deployed<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">as</span><span style="color:#bbb"> </span>Kubernetes<span style="color:#bbb"> </span>resources,<span style="color:#bbb"> </span>they<span style="color:#bbb"> </span>are<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">references</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">by</span><span style="color:#bbb"> </span>name<span style="color:#bbb"> </span>rather<span style="color:#bbb"> </span>than<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">by</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>relative<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>path.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>This<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">is</span><span style="color:#bbb"> </span>why<span style="color:#bbb"> </span>we<span style="color:#bbb"> </span>need<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>have<span style="color:#bbb"> </span>them<span style="color:#bbb"> </span>installed<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">before</span><span style="color:#bbb"> </span>running<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>experiment.<span style="color:#bbb"> </span>(<span style="color:#069;font-weight:bold">for</span><span style="color:#bbb"> </span>installation<span style="color:#bbb"> </span>instructions<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#069;font-weight:bold">check</span><span style="color:#bbb"> </span>[here](docs<span style="color:#555">/</span>singlenode<span style="color:#555">-</span>deployment.md).)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span>yaml<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Standard Kubernetes boilerplate
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>apiVersion:<span style="color:#bbb"> </span>frisbee.io<span style="color:#555">/</span>v1alpha1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>TestPlan<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span>redis<span style="color:#555">-</span>failover<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Here we specify the workflow as a directed-acyclic graph (DAG) by specifying the dependencies of each action.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>actions:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Service creates an instance of a Redis Master
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># To create the instance we use the redis.single.master with the default parameters.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">-</span><span style="color:#bbb"> </span>action:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span>master<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>service:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>templateRef:<span style="color:#bbb"> </span>redis.single.master<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># This action is same as before, with two additions.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># 1. The `depends&#39; keyword ensure that the action will be executed only after the `master&#39; action
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># has reached a Running state.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># 2. The `inputs&#39; keyword initialized the instance with custom parameters.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">-</span><span style="color:#bbb"> </span>action:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span>slave<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>depends:<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>running:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span>master<span style="color:#bbb"> </span>]<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>service:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>templateRef:<span style="color:#bbb"> </span>redis.single.slave<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>inputs:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>master:<span style="color:#bbb"> </span>.service.master.one<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># The sentinel is Redis failover manager. Notice that we can have multiple dependencies.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">-</span><span style="color:#bbb"> </span>action:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span>sentinel<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>depends:<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>running:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span>master,<span style="color:#bbb"> </span>slave<span style="color:#bbb"> </span>]<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>service:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>templateRef:<span style="color:#bbb"> </span>redis.single.sentinel<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>inputs:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>master:<span style="color:#bbb"> </span>.service.master.one<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Cluster creates a list of services that run a shared context.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># In this case, we create a cluster of YCSB loaders to populate the master with keys.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">-</span><span style="color:#bbb"> </span>action:<span style="color:#bbb"> </span>Cluster<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span><span style="color:#c30">&#34;loaders&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>depends:<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>running:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span>master<span style="color:#bbb"> </span>]<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>cluster:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>templateRef:<span style="color:#bbb"> </span>ycsb.redis.loader<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>inputs:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>server:<span style="color:#bbb"> </span>.service.master.one,<span style="color:#bbb"> </span>recordcount:<span style="color:#bbb"> </span><span style="color:#c30">&#34;100000000&#34;</span>,<span style="color:#bbb"> </span>offset:<span style="color:#bbb"> </span><span style="color:#c30">&#34;0&#34;</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>server:<span style="color:#bbb"> </span>.service.master.one,<span style="color:#bbb"> </span>recordcount:<span style="color:#bbb"> </span><span style="color:#c30">&#34;100000000&#34;</span>,<span style="color:#bbb"> </span>offset:<span style="color:#bbb"> </span><span style="color:#c30">&#34;100000000&#34;</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>server:<span style="color:#bbb"> </span>.service.master.one,<span style="color:#bbb"> </span>recordcount:<span style="color:#bbb"> </span><span style="color:#c30">&#34;100000000&#34;</span>,<span style="color:#bbb"> </span>offset:<span style="color:#bbb"> </span><span style="color:#c30">&#34;200000000&#34;</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># While the loaders are running, we inject a network partition fault to the master node.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># The &#34;after&#34; dependency adds a delay so to have some keys before injecting the fault.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># The fault is automatically retracted after 2 minutes.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">-</span><span style="color:#bbb"> </span>action:<span style="color:#bbb"> </span>Chaos<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span>partition0<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>depends:<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>running:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span>loaders<span style="color:#bbb"> </span>],<span style="color:#bbb"> </span>after:<span style="color:#bbb"> </span><span style="color:#c30">&#34;3m&#34;</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>chaos:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>type:<span style="color:#bbb"> </span>partition<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>partition:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>selector:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>macro:<span style="color:#bbb"> </span>.service.master.one<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>duration:<span style="color:#bbb"> </span><span style="color:#c30">&#34;2m&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Here we repeat the partition, a few minutes after the previous fault has been recovered.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">-</span><span style="color:#bbb"> </span>action:<span style="color:#bbb"> </span>Chaos<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>name:<span style="color:#bbb"> </span>partition1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>depends:<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>running:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span>master,<span style="color:#bbb"> </span>slave<span style="color:#bbb"> </span>],<span style="color:#bbb"> </span>success:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span>partition0<span style="color:#bbb"> </span>],<span style="color:#bbb"> </span>after:<span style="color:#bbb"> </span><span style="color:#c30">&#34;6m&#34;</span><span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>chaos:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>type:<span style="color:#bbb"> </span>partition<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>partition:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>selector:<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">{</span><span style="color:#bbb"> </span>macro:<span style="color:#bbb"> </span>.service.master.one<span style="color:#bbb"> </span><span style="color:#a00;background-color:#faa">}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>duration:<span style="color:#bbb"> </span><span style="color:#c30">&#34;1m&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Here we declare the Grafana dashboards that Workflow will make use of.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>withTelemetry:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>importDashboards:<span style="color:#bbb"> </span>[<span style="color:#bbb"> </span><span style="color:#c30">&#34;system.telemetry.agent&#34;</span>,<span style="color:#bbb"> </span><span style="color:#c30">&#34;ycsb.telemetry.client&#34;</span>,<span style="color:#bbb">  </span><span style="color:#c30">&#34;redis.telemetry.server&#34;</span><span style="color:#bbb"> </span>]<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Run the experiment
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>Firstly,<span style="color:#bbb"> </span>you<span style="color:#c30">&#39;ll need a Kubernetes deployment and `kubectl` set-up
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* For a single-node deployment click [here](docs/singlenode-deployment.md).
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* For a multi-node deployment click [here](docs/cluster-deployment.md).
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">In this walk-through, we assume you have followed the instructions for the single-node deployment.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">In one terminal, run the Frisbee controller.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">If you want to run the webhooks locally, you’ll have to generate certificates for serving the webhooks, and place them
</span></span></span><span style="display:flex;"><span><span style="color:#c30">in the right directory (/tmp/k8s-webhook-server/serving-certs/tls.{crt,key}, by default).
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">_If you’re not running a local API server, you’ll also need to figure out how to proxy traffic from the remote cluster
</span></span></span><span style="display:flex;"><span><span style="color:#c30">to your local webhook server. For this reason, we generally recommend disabling webhooks when doing your local
</span></span></span><span style="display:flex;"><span><span style="color:#c30">code-run-test cycle, as we do below._
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30"># Run the Frisbee controller
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt;  make run ENABLE_WEBHOOKS=false
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">We can use the controller&#39;</span>s<span style="color:#bbb"> </span>output<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>reason<span style="color:#bbb"> </span>about<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>experiments<span style="color:#bbb"> </span>transition.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#069;font-weight:bold">On</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>other<span style="color:#bbb"> </span>terminal,<span style="color:#bbb"> </span>you<span style="color:#bbb"> </span>can<span style="color:#bbb"> </span>issue<span style="color:#bbb"> </span>requests.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span>bash<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Create a dedicated Frisbee name
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">&gt;&gt;</span><span style="color:#bbb"> </span>kubectl<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">create</span><span style="color:#bbb"> </span>namespace<span style="color:#bbb"> </span>frisbee<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Run a testplan (from Frisbee directory)
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">&gt;&gt;</span><span style="color:#bbb"> </span>kubectl<span style="color:#bbb"> </span><span style="color:#555">-</span>n<span style="color:#bbb"> </span>frisbee<span style="color:#bbb"> </span>apply<span style="color:#bbb"> </span><span style="color:#555">-</span>f<span style="color:#bbb"> </span>examples<span style="color:#555">/</span>testplans<span style="color:#555">/</span><span style="color:#f60">3</span>.failover.yml<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>workflow.frisbee.io<span style="color:#555">/</span>redis<span style="color:#555">-</span>failover<span style="color:#bbb"> </span>created<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Confirm that the workflow is running.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">&gt;&gt;</span><span style="color:#bbb"> </span>kubectl<span style="color:#bbb"> </span><span style="color:#555">-</span>n<span style="color:#bbb"> </span>frisbee<span style="color:#bbb"> </span>get<span style="color:#bbb"> </span>pods<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>NAME<span style="color:#bbb">         </span>READY<span style="color:#bbb">   </span>STATUS<span style="color:#bbb">    </span>RESTARTS<span style="color:#bbb">   </span>AGE<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>prometheus<span style="color:#bbb">   </span><span style="color:#f60">1</span><span style="color:#555">/</span><span style="color:#f60">1</span><span style="color:#bbb">     </span>Running<span style="color:#bbb">   </span><span style="color:#f60">0</span><span style="color:#bbb">          </span><span style="color:#f60">12</span>m<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>grafana<span style="color:#bbb">      </span><span style="color:#f60">1</span><span style="color:#555">/</span><span style="color:#f60">1</span><span style="color:#bbb">     </span>Running<span style="color:#bbb">   </span><span style="color:#f60">0</span><span style="color:#bbb">          </span><span style="color:#f60">12</span>m<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>master<span style="color:#bbb">       </span><span style="color:#f60">3</span><span style="color:#555">/</span><span style="color:#f60">3</span><span style="color:#bbb">     </span>Running<span style="color:#bbb">   </span><span style="color:#f60">0</span><span style="color:#bbb">          </span><span style="color:#f60">12</span>m<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>loaders<span style="color:#555">-</span><span style="color:#f60">0</span><span style="color:#bbb">    </span><span style="color:#f60">3</span><span style="color:#555">/</span><span style="color:#f60">3</span><span style="color:#bbb">     </span>Running<span style="color:#bbb">   </span><span style="color:#f60">0</span><span style="color:#bbb">          </span><span style="color:#f60">11</span>m<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>slave<span style="color:#bbb">        </span><span style="color:#f60">3</span><span style="color:#555">/</span><span style="color:#f60">3</span><span style="color:#bbb">     </span>Running<span style="color:#bbb">   </span><span style="color:#f60">0</span><span style="color:#bbb">          </span><span style="color:#f60">11</span>m<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>sentinel<span style="color:#bbb">     </span><span style="color:#f60">1</span><span style="color:#555">/</span><span style="color:#f60">1</span><span style="color:#bbb">     </span>Running<span style="color:#bbb">   </span><span style="color:#f60">0</span><span style="color:#bbb">          </span><span style="color:#f60">11</span>m<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># Wait until the test oracle is triggered.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#555">&gt;&gt;</span><span style="color:#bbb"> </span>kubectl<span style="color:#bbb"> </span><span style="color:#555">-</span>n<span style="color:#bbb"> </span>frisbee<span style="color:#bbb"> </span>wait<span style="color:#bbb"> </span><span style="color:#555">--</span><span style="color:#069;font-weight:bold">for</span><span style="color:#555">=</span><span style="color:#069;font-weight:bold">condition</span><span style="color:#555">=</span>oracle<span style="color:#bbb"> </span>workflows.frisbee.io<span style="color:#555">/</span>redis<span style="color:#555">-</span>failover<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>...<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic">## How can I understand what happened ?
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>One<span style="color:#bbb"> </span>way,<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">is</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>access<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>workflow<span style="color:#c30">&#39;s description
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt; kubectl -n frisbee describe workflows.frisbee.io/validate-local
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">But why bother if you can access Grafana directly ?
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Frisbee in a Nutshell
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>This<span style="color:#bbb"> </span>tutorial<span style="color:#bbb"> </span>introduces<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>basic<span style="color:#bbb"> </span>functionalities<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>Frisbee:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#555">**</span><span style="color:#069;font-weight:bold">Write</span><span style="color:#bbb"> </span>tests:<span style="color:#555">**</span><span style="color:#bbb">  </span><span style="color:#069;font-weight:bold">for</span><span style="color:#bbb"> </span>stressing<span style="color:#bbb"> </span>complex<span style="color:#bbb"> </span>topologies<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">and</span><span style="color:#bbb"> </span>dynamic<span style="color:#bbb"> </span>operating<span style="color:#bbb"> </span>conditions.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#555">**</span>Run<span style="color:#bbb"> </span>tests:<span style="color:#555">**</span><span style="color:#bbb">  </span>provides<span style="color:#bbb"> </span>seamless<span style="color:#bbb"> </span>scaling<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">from</span><span style="color:#bbb"> </span>a<span style="color:#bbb"> </span>single<span style="color:#bbb"> </span>workstation<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>hundreds<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>machines.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">-</span><span style="color:#bbb"> </span><span style="color:#555">**</span>Debug<span style="color:#bbb"> </span>tests:<span style="color:#555">**</span><span style="color:#bbb">  </span>through<span style="color:#bbb"> </span>extensive<span style="color:#bbb"> </span>monitoring<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">and</span><span style="color:#bbb"> </span>comprehensive<span style="color:#bbb"> </span>dashboards.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#069;font-weight:bold">For</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>rest<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>this<span style="color:#bbb"> </span>tutorial<span style="color:#bbb"> </span>we<span style="color:#bbb"> </span>will<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">use</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>Frisbee<span style="color:#bbb"> </span>package<span style="color:#bbb"> </span>of<span style="color:#bbb"> </span>TiKV<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">key</span><span style="color:#555">/</span>value<span style="color:#bbb"> </span>store.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic">#### Frisbee Installation
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#069;font-weight:bold">Before</span><span style="color:#bbb"> </span>anything<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">else</span>,<span style="color:#bbb"> </span>we<span style="color:#bbb"> </span>need<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>install<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>Frisbee<span style="color:#bbb"> </span>platform<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">and</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>Frisbee<span style="color:#bbb"> </span>packages<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">for</span><span style="color:#bbb"> </span>testing.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#069;font-weight:bold">Then</span><span style="color:#bbb"> </span>you<span style="color:#bbb"> </span>have<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>go<span style="color:#bbb"> </span>install<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>Frisbee<span style="color:#bbb"> </span>system.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span>bash<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">&gt;&gt;</span><span style="color:#bbb"> </span>cd<span style="color:#bbb"> </span>charts<span style="color:#555">/</span>frisbee<span style="color:#555">/</span>charts<span style="color:#555">/</span>frisbee<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">&gt;&gt;</span><span style="color:#bbb"> </span>helm<span style="color:#bbb"> </span>install<span style="color:#bbb"> </span>frisbee<span style="color:#bbb"> </span>.<span style="color:#555">/</span><span style="color:#bbb"> </span><span style="color:#555">--</span>dependency<span style="color:#555">-</span><span style="color:#069;font-weight:bold">update</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#555">```</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>You<span style="color:#bbb"> </span>will<span style="color:#bbb"> </span>see<span style="color:#bbb"> </span>a<span style="color:#bbb"> </span>YAML<span style="color:#bbb"> </span>output<span style="color:#bbb"> </span>that<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">describe</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>components<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">to</span><span style="color:#bbb"> </span>be<span style="color:#bbb"> </span>installed.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic">#### Run the controller
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>After<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>Frisbee<span style="color:#bbb"> </span>CRDs<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">and</span><span style="color:#bbb"> </span>their<span style="color:#bbb"> </span>dependencies<span style="color:#bbb"> </span>are<span style="color:#bbb"> </span>installed,<span style="color:#bbb"> </span>you<span style="color:#bbb"> </span>can<span style="color:#bbb"> </span>start<span style="color:#bbb"> </span>running<span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>Frisbee<span style="color:#bbb"> </span>controller.<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#069;font-weight:bold">From</span><span style="color:#bbb"> </span>the<span style="color:#bbb"> </span>project<span style="color:#c30">&#39;s directory run
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt; make run
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">#### Modify an examples test
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">Perhaps the best way is to modify an existing test. We use the `iperf` benchmark as a reference.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">From another terminal (do not close the controller), go to
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt; cd charts/iperf/
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">You will see the following files:
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* **templates**:  libraries of frequently-used specifications that are reusable throughout the testing plan.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* **plans**: lists of actions that define what will happen throughout the test.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* **dashboards**: application-specific dashboards for Grafana
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">Because templates are used by the plans, we must have them installed before the running the tests.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt; helm install iperf ./ --dependency-update
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">Then, run the test to become familiar with the procedure.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt; kubectl apply -f plans/plan.validate-network.yml
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">If everything works fine, you will see the logs flowing in the **controller**.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">Then you will get a message like
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt; Error: found in Chart.yaml, but missing in charts/ directory: chaos-mesh, openebs
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">This is because the Frisbee installation are not yet downloaded. To get them automatically run the previous command
</span></span></span><span style="display:flex;"><span><span style="color:#c30">with`--dependency-update` flag. Also, remove the `--dry-run` run to execute the actual installation.
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```bash
</span></span></span><span style="display:flex;"><span><span style="color:#c30">&gt;&gt;  helm install frisbee ./ --dependency-update
</span></span></span><span style="display:flex;"><span><span style="color:#c30">```
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">Run the controller
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">== Operatator-SDK
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">=== Create a new Controller
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* operator-sdk create api --group frisbee --version v1alpha1 --kind MyNewController --resource --controller
</span></span></span><span style="display:flex;"><span><span style="color:#c30">* operator-sdk create webhook --group frisbee --version v1alpha1 --kind MyNewController --defaulting
</span></span></span><span style="display:flex;"><span><span style="color:#c30">--programmatic-validation
</span></span></span><span style="display:flex;"><span><span style="color:#c30">
</span></span></span><span style="display:flex;"><span><span style="color:#c30">docker save frisbee:latest -o image.tar
</span></span></span></code></pre></div><p>== Notes ==</p>
<ol>
<li>Cadvisor does not support for NFS mounts.</li>
<li>Check how we can use block devices</li>
</ol>
<h2 id="run-a-test-1">Run a test <a class="header-link" href="#run-a-test-1"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<h4 id="step-1--install-dependencies">Step 1:  Install Dependencies <a class="header-link" href="#step-1--install-dependencies"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<p>Make sure that <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/">kubectl</a>
and are installed on your system, and that you have access to a Kubernetes
installation.</p>
<ul>
<li>
<p><strong>Local Installation</strong> If you want a local installation you can use</p>
</li>
<li>
<p><strong>Remote Installation</strong>: Set  <code>~/.kube/config</code> appropriately, and create tunnel for sending requests to Kubernetes
API.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Create tunnel for sending requests to Kubernetes API.</span>
</span></span><span style="display:flex;"><span>&gt;&gt; ssh -L 6443:192.168.1.213:6443 <span style="color:#555">[</span>USER@<span style="color:#555">]</span>SSH_SERVER
</span></span></code></pre></div><h4 id="step-2-update-helm-repo">Step 2: Update Helm repo <a class="header-link" href="#step-2-update-helm-repo"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<h4 id="step-3">Step 3: <a class="header-link" href="#step-3"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<h4 id="this-step-will-install-the-following-components">This step will install the following components: <a class="header-link" href="#this-step-will-install-the-following-components"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<ul>
<li>Frisbee CRDS</li>
<li>Frisbee Controller</li>
<li>Frisbee Dependency stack (e.g, Chaos toolkits, dynamic volume provisioning, observability stack)</li>
<li>Ingress for making the observability stack accessible from outside the Kubernetes</li>
</ul>
<p>By default the platform sets the Ingress to <code>localhost</code>.</p>
<p>If you use a non-local cluster, you can these the ingress via the  <code>global.ingress</code> flag.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Install the platform with non-local ingress</span>
</span></span><span style="display:flex;"><span>&gt;&gt; helm upgrade --install --wait my-frisbee frisbee/platform --set global.ingress<span style="color:#555">=</span>platform.science-hangar.eu
</span></span></code></pre></div><h4 id="step-4--install-the-testing-components">Step 4:  Install the testing components <a class="header-link" href="#step-4--install-the-testing-components"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"></code></pre></div><h4 id="step-5-run-the-test-plan">Step 5: Run the Test Plan <a class="header-link" href="#step-5-run-the-test-plan"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<p>This url points
to : <a href="https://raw.githubusercontent.com/CARV-ICS-FORTH/frisbee/main/charts/tikv/examples/plan.baseline.yml">https://raw.githubusercontent.com/CARV-ICS-FORTH/frisbee/main/charts/tikv/examples/plan.baseline.yml</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Create a plan</span>
</span></span><span style="display:flex;"><span>&gt;&gt; curl -sSL https://tinyurl.com/t3xrtmny | kubectl -f - apply
</span></span></code></pre></div><h1 id="observe-a-testplan">Observe a Testplan</h1>
<h3 id="kubernetes-dashboard">Kubernetes Dashboard <a class="header-link" href="#kubernetes-dashboard"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3>
<p>If you use a microk8s installation of Kubernetes, then the procedure is slightly different.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Deploy the dashboard</span>
</span></span><span style="display:flex;"><span>&gt;&gt; microk8s dashboard-proxy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Start the dashboard</span>
</span></span><span style="display:flex;"><span>&gt;&gt; microk8s dashboard-proxy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Now access Dashboard at:</span>
</span></span><span style="display:flex;"><span>https://localhost:10443
</span></span></code></pre></div><h4 id="controller-logs">Controller Logs <a class="header-link" href="#controller-logs"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<p>The logs of the controller are accessible by the terminal on which the controller is running.</p>
<h3 id="grafana-dashboard--alerts">Grafana Dashboard &amp; Alerts <a class="header-link" href="#grafana-dashboard--alerts"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3>
<p>Grafana is a multi-platform open source analytics and interactive visualization web application.</p>
<p>To access it, use the format <code>http://grafana.${INGRESS}</code> where <code>Ingress</code> is the value you defined in step 3.</p>
<p>For example,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Access Grafana via your browser</span>
</span></span><span style="display:flex;"><span>http://grafana.platform.science-hangar.eu
</span></span></code></pre></div><p>Optionally, validate that everything works.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Deploy a hello world</span>
</span></span><span style="display:flex;"><span>&gt;&gt;  kubectl create deployment hello-node --image<span style="color:#555">=</span>k8s.gcr.io/echoserver:1.4
</span></span><span style="display:flex;"><span>deployment.apps/hello-node created
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Verify that a hell-node deployment exists</span>
</span></span><span style="display:flex;"><span>&gt;&gt; kubectl get deployments
</span></span><span style="display:flex;"><span>NAME         READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>hello-node   1/1     <span style="color:#f60">1</span>            <span style="color:#f60">1</span>           36s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Delete the deployment</span>
</span></span><span style="display:flex;"><span>&gt;&gt; kubectl delete deployments hello-node
</span></span><span style="display:flex;"><span>deployment.apps <span style="color:#c30">&#34;hello-node&#34;</span> deleted
</span></span></code></pre></div><p>This step will install the Frisbee CRDs and all the necessary tools.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Update Helm repo</span>
</span></span><span style="display:flex;"><span>&gt;&gt; helm repo add frisbee https://carv-ics-forth.github.io/frisbee/charts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># Install the platform with local ingress</span>
</span></span><span style="display:flex;"><span>&gt;&gt; helm upgrade --install --wait my-frisbee frisbee/platform
</span></span></code></pre></div><p>KUBECONFIG=&quot;/home/fnikol/.kube/config.evolve.admin&quot; make run</p>
<p>ahelm upgrade --install --wait my-frisbee ./charts/platform/ --debug --set operator.enabled=false -f
./charts/platform/values-baremetal.yaml
ehelm upgrade --install --wait my-system ./charts/system --debug</p>
<p>Cool hacks:</p>
<p><a href="https://github.com/antrea-io/antrea/tree/main/hack">https://github.com/antrea-io/antrea/tree/main/hack</a></p>
<h1 id="helm">HELM</h1>
<p>Create a public Helm chart repository with GitHub Pages</p>
<p>What is Helm and a Helm chart repository</p>
<p>Helm, as per official claim, is “The package manager for Kubernetes”.</p>
<p>Indeed Helm really helps handling application deployments on Kubernetes, not only because it simplifies the application
release phase but also because Helm makes possible to easily manage variables in the Kubernetes manifest YAML files.</p>
<p>Once the charts are ready and you need to share them, the easiest way to do so is by uploading them to a chart
repository. A Helm chart repository is where we host and share Helm packages and any HTTP server will do. Unluckily Helm
does not include natively a tool for uploading charts to a remote chart repository server (Helm can serve the local
repository via $ helm serve though).</p>
<p>We’ll take advantage of GitHub Pages for the purpose to share our charts.</p>
<p>What is GitHub Pages</p>
<p>GitHub Pages is a static site hosting service provided to you by GitHub, designed to host your pages directly from a
GitHub repository. GitHub Pages is a perfect match for our purpose, since everything we need is to host a single
index.yaml file along with a bunch of .tgz files.</p>
<p>Why not hosting all this stuff in your own web server? A managed service helps to reduce your operational overhead and
risk (think to monitoring, patch management, security, backup services…) so you can focus on code and in what makes your
business relevant for your customers.</p>
<p>Useful links:
<a href="https://medium.com/@mattiaperi/create-a-public-helm-chart-repository-with-github-pages-49b180dbb417">https://medium.com/@mattiaperi/create-a-public-helm-chart-repository-with-github-pages-49b180dbb417</a>
<a href="https://github.com/technosophos/tscharts">https://github.com/technosophos/tscharts</a></p>
<p>A <strong>Test Plan</strong> documents the strategy that will be used to verify a specific test for
a <a href="https://en.wikipedia.org/wiki/Software">software</a> product.</p>
<p>The plan typically contains a detailed understanding of the eventual <a href="https://en.wikipedia.org/wiki/Workflow">workflow</a>
that models the deployment scenario for a software product, the test strategy, the resources required to perform
testing, and the Key Performance Indicators required to ensure that a product or system meets its design specifications
and other requirements.</p>
<p>By codifying the test plan in a YAML-based syntax, Frisbee carriers three main benefits to teams:</p>
<ol>
<li>
<p>Help people outside the test team such as developers, business managers, customers <strong>understand</strong> the details of
testing.</p>
</li>
<li>
<p>Test Plan <strong>guides</strong> our thinking. It is like a rule book, which needs to be followed.</p>
</li>
<li>
<p>Important aspects like test estimation, test
scope,<a href="https://www.guru99.com/how-to-create-test-strategy-document.html">Test Strategy</a>are <strong>documented</strong> in Test
Plan, so it can be reviewed by Management Team and re-used for other projects.</p>
</li>
</ol>
<p>A test plan may include a strategy for one or more of the following:</p>
<ul>
<li>Baseline: to be performed during the development or approval stages of the product, typically on a small sample of
units.</li>
<li>Stress: to be performed during preparation or assembly of the product, in an ongoing manner for purposes of
performance verification and quality control.</li>
</ul>
<h2 id="baseline">Baseline <a class="header-link" href="#baseline"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<p>A baseline is <strong>a fixed point of reference that is used for comparison purposes</strong>.</p>
<h4 id="ycsb">YCSB <a class="header-link" href="#ycsb"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<p>Cloud Serving Benchmark (YCSB) is <strong>an open-source specification and program suite for evaluating retrieval and
maintenance capabilities of computer programs</strong>. It is often used to compare relative performance of NoSQL database
management systems.</p>
<p>All six workloads have a data set which is similar. Workloads D and E insert records during the test run.</p>
<p>Thus, to keep the database size consistent, we apply the following sequence:</p>
<ol start="0">
<li>
<p>Bootstrap the database.</p>
</li>
<li>
<p>Load the database, using workload A's parameter file (workloads/workloada) and the &quot;-load&quot; switch to the client.</p>
</li>
<li>
<p>Run workload A (using workloads/workloada and &quot;-t&quot;) for a variety of throughputs.</p>
</li>
<li>
<p>Run workload B (using workloads/workloadb and &quot;-t&quot;) for a variety of throughputs.</p>
</li>
<li>
<p>Run workload C (using workloads/workloadc and &quot;-t&quot;) for a variety of throughputs.</p>
</li>
<li>
<p>Run workload F (using workloads/workloadf and &quot;-t&quot;) for a variety of throughputs.</p>
</li>
<li>
<p>Run workload D (using workloads/workloadd and &quot;-t&quot;) for a variety of throughputs. This workload inserts records,
increasing the size of the database.</p>
</li>
<li>
<p>Delete the data in the database. Otherwise, the remaining data of the cluster might affect the results of the
following workload. For the deletion, instead of destroying the cluster, we destroy and recreate the cluster.</p>
</li>
<li>
<p>Reload the database, using workload E's parameter file (workloads/workloade) and the &quot;-load switch to the client.</p>
</li>
<li>
<p>Run workload E (using workloads/workloadd and &quot;-t&quot;) for a variety of throughputs. This workload inserts records,
increasing the size of the database.</p>
</li>
</ol>
<p>In general, these steps remain the same for the various databases. The difference is how we bootstrap each database.</p>
<h4 id="fio">FIO <a class="header-link" href="#fio"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4>
<p>To <em>benchmark</em> persistent disk performance, use <em>FIO</em> instead of other disk <em>benchmarking</em> tools such as dd .</p>
<p>Fio spawns a number of threads or processes doing a particular type of I/O action as specified by the user.</p>
<h2 id="stress">Stress <a class="header-link" href="#stress"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<h2 id="scaleout">Scaleout <a class="header-link" href="#scaleout"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<h2 id="elasticity">Elasticity <a class="header-link" href="#elasticity"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<h2 id="chaos">Chaos <a class="header-link" href="#chaos"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<h2 id="guide-for-the-frisbee-plan-developers">Guide for the Frisbee Plan Developers <a class="header-link" href="#guide-for-the-frisbee-plan-developers"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<ul>
<li>Spurious Alert may be risen if the expr evaluation frequency is less than the scheduled interval.</li>
<li>In this case, Grafana faces an idle period, and raises a NoData Alert.</li>
<li>The controller ignores such messages.</li>
</ul>
<h1 id="periodically-kill-some-nodes">Periodically kill some nodes.</h1>
<ul>
<li>action: Cascade name: killer depends: { running: [ clients ] } cascade:
templateRef: system.chaos.pod.kill instances: 3 inputs:</li>
<li>{ target: .cluster.clients.one }</li>
</ul>
<p>This can be wrong because Frisbee selects a single client -- and will be used 3 times, without error. Instead, we must
use as many inputs as the number of instances -- or omit instances.</p>
<p>In general, because when you use one input for multiple instances.</p>
<p>Macros select only Running objects</p>
<h3 id="do-not-set-dependencies-on-cascades">Do not set dependencies on cascades <a class="header-link" href="#do-not-set-dependencies-on-cascades"><svg class="fill-current o-60 hover-accent-color-light" height="22px" viewBox="0 0 24 24" width="22px" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3>
<p>This is because Kills are always running -- therefore cascades that involve kill actions are always running</p>

</div>

          

        </div>
      </div>
      <div class="order-0 w-20 dn db-l">
        
<nav role="navigation">
  <ul class="list pa0 nl2">
    
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".about">About Frisbee</a>
        <ul class="about desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/about/what-is-frisbee/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              What is Frisbee
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/about/features/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Basic Features
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/about/license/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              License
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".getting-started">Getting Started</a>
        <ul class="getting-started desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/getting-started/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Overview
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/getting-started/quick-start/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Quick Start
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/getting-started/installing/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Install Frisbee
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/getting-started/usage/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Basic Usage
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/getting-started/configuration/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Configuration
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2  primary-color" data-target=".chart-guide">Chart Guide</a>
        <ul class="chart-guide desktopmenu animated fadeIn list pl0 bg-light-gray db">
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/chart-guide/deploy/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Use an existing Chart
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/chart-guide/develop/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 primary-color ">
              Develop a new Chart
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray">
        <a href="https://fnikolai.github.io/frisbee-www/commands/" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".commands">CLI</a>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="javascript:void(0)" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".troubleshooting">Troubleshooting</a>
        <ul class="troubleshooting desktopmenu animated fadeIn list pl0 bg-light-gray dn">
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/troubleshooting/faq/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              FAQ
            </a>
          </li>
          <li class="f6 fw4">
            <a href="https://fnikolai.github.io/frisbee-www/docs/troubleshooting/tools/" class="db link hover-bg-gray hover-white pl3 pr2 pv2 black ">
              Tools
            </a>
          </li>
        </ul>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8">
        <a href="https://fnikolai.github.io/frisbee-www/hosting-and-deployment/" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".hosting-and-deployment">Hosting &amp; Deployment</a>
      </li>
      
      <li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray">
        <a href="https://fnikolai.github.io/frisbee-www/contribute/" class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 " data-target=".contribute">Contribute</a>
      </li>
  </ul>
</nav>

      </div>

    </div>
  </article>

  <div class="w-100 bg-light-gray">
    <div class="mw7 pa4 center nested-lh-copy lh-copy">
      <h6 class="f6 dark-gray mb2">
  Last updated: June 28, 2022
</h6>

      <a href="https://github.com/CARV-ICS-FORTH/frisbee/edit/master/content/en/docs/chart-guide/develop.md" class="
f6 ph3 pv1 br2 dib  tc ttu mv3 bg-primary-color white hover-bg-green link
">Improve this page</a>

      


    </div>
  </div>

  </main>

  <footer class="bg-primary-color-dark ph4-ns pt4 relative w-100" role="contentinfo">
    <div class="center flex-ns flex-wrap justify-between mw9 w-90">
      <div class="pb3 pt4 w-100 w-50-ns">
          <h3 class="b f4 mv0 light-gray">
              This project has received funding from the European Union's Horizon 2020 research and innovation programme under grant agreement No. 894204 (Ether, H2020-MSCA-IF-2019)
          </h3>
      </div>

      <div class="w-50 w-50-l"> 
        


  <section class="pb3 w-100">
    <div class="center mw9"> 

      <div class="flex-ns flex-wrap center justify-between pt3">
        
          
          
            <div class="ba b--dark-gray bg-light-gray br3 flex flex-column flex-wrap items-center justify-center ph3 pv4 mb4 w-100 w-30-l  o-100">
              
                
                   <a href="https://cordis.europa.eu/project/id/894204?utm_campaign=hugosponsor&amp;utm_medium=banner&amp;utm_source=homepage" class="grow">
                
              <img src="https://fnikolai.github.io/frisbee-www/images/sponsors/eu-logo.png" alt="Logo for European Union" class="img h3 center" />
              </a>
              
            </div>
          
        
          
          
            <div class="ba b--dark-gray bg-light-gray br3 flex flex-column flex-wrap items-center justify-center ph3 pv4 mb4 w-100 w-30-l  o-100">
              
                
                   <a href="https://marie-sklodowska-curie-actions.ec.europa.eu/actions/postdoctoral-fellowships?utm_campaign=hugosponsor&amp;utm_medium=banner&amp;utm_source=homepage" class="grow">
                
              <img src="https://fnikolai.github.io/frisbee-www/images/sponsors/msca-logo.jpg" alt="Logo for Marie Skłodowska-Curie Actions" class="img h3 center" />
              </a>
              
            </div>
          
        
      </div>
    </div>
  </section>


      </div>

    </div>

    <div class="bg-primary-color-dark bottom-0 left-0 right-0 dn-l fixed pb3 ph3 pt3 w-100"><div  class="globalmenu mobilemenu pb1 dn">
    

<ul class="list hidden dib ph0 scrolling-touch tc">
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/news/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          News
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/docs/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Docs
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/showcase/" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Showcase
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://github.com/CARV-ICS-FORTH/frisbee/discussions" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          Community
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://github.com/CARV-ICS-FORTH/frisbee" class="ttu f6 link primary-color-light overflow hover-white db brand-font  ma0 w-100 pv3 ph4">
          GitHub
        </a>
    </li>
  
</ul>

</div>
<div  class="docsmenu mobilemenu pb1 dn">
    

<ul class="list dib ph0 scrolling-touch tc">
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/about/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          About Frisbee
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray">
        <a href="https://fnikolai.github.io/frisbee-www/getting-started" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Getting Started
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/chart-guide/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Chart Guide
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray">
        <a href="https://fnikolai.github.io/frisbee-www/commands/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          CLI
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/troubleshooting/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Troubleshooting
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100">
        <a href="https://fnikolai.github.io/frisbee-www/hosting-and-deployment/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Hosting &amp; Deployment
        </a>
    </li>
  
    <li  class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray">
        <a href="https://fnikolai.github.io/frisbee-www/contribute/" class="ttu f6 link primary-color-light  hover-white db brand-font mb1  ma0 w-100 pv2 ph4">
          Contribute
        </a>
    </li>
  
</ul>

</div>

<div class="flex dn-l justify-between">
  <button class="js-toggle flex-auto dib dn-l f6 tc db ph3 pv2 link mr2 white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=".globalmenu">Menu</button>

  <button class="js-toggle flex-auto dib dn-l f6 tc db ph3 pv2 link white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=".docsmenu">Docs Menu</button>
</div>
</div>

</footer>

  
  

  

  


</body>

</html>
